import{f as L,a as B}from"../chunks/DkXlLIkS.js";import{h as M,a as ge,b as pe,J as h,am as be,r as Ee,H as we,s as le,c as Q,d as U,k as F,C as ye,ak as Ae,j as re,l as xe,e as Y,ai as oe,an as Ie,i as fe,ao as Se,V as ne,a3 as ie,f as ce,p as Te,ap as J,aq as X,g as de,ar as K,as as Ce,A as ke,at as Ne,ah as De,au as Me,w as He,t as Oe,av as _e,Y as Re,aw as qe,ax as Ve,ay as Be,q as Le,W as Pe,az as Ye,aA as G,aB as We,Q as N,D as Z,S as H,aC as C,R as k,aD as Fe,B as Je}from"../chunks/BsaVdYKB.js";import{d as Ke,e as ze,s as $}from"../chunks/B3wobsgq.js";import{i as j}from"../chunks/DsoAu5da.js";function ve(e,s){return s}function Qe(e,s,a){for(var t=e.items,u=[],o=s.length,i=0;i<o;i++)Ne(s[i].e,u,!0);var c=o>0&&u.length===0&&a!==null;if(c){var y=a.parentNode;De(y),y.append(a),t.clear(),D(e,s[0].prev,s[o-1].next)}Me(u,()=>{for(var m=0;m<o;m++){var p=s[m];c||(t.delete(p.k),D(e,p.prev,p.next)),de(p.e,!c)}})}function ue(e,s,a,t,u,o=null){var i=e,c={flags:s,items:new Map,first:null},y=(s&_e)!==0;if(y){var m=e;i=M?Q(Oe(m)):m.appendChild(fe())}M&&ge();var p=null,I=!1,w=new Map,S=be(()=>{var d=a();return Ie(d)?d:d==null?[]:oe(d)}),n,l;function v(){Ue(l,n,c,w,i,u,s,t,a),o!==null&&(n.length===0?p?ce(p):p=re(()=>o(i)):p!==null&&Te(p,()=>{p=null}))}pe(()=>{l??=He,n=h(S);var d=n.length;if(I&&d===0)return;I=d===0;let g=!1;if(M){var A=Ee(i)===we;A!==(d===0)&&(i=le(),Q(i),U(!1),g=!0)}if(M){for(var b=null,_,r=0;r<d;r++){if(F.nodeType===ye&&F.data===Ae){i=F,g=!0,U(!1);break}var f=n[r],E=t(f,r);_=te(F,c,b,null,f,E,r,u,s,a),c.items.set(E,_),b=_}d>0&&Q(le())}if(M)d===0&&o&&(p=re(()=>o(i)));else if(xe()){var O=new Set,P=Y;for(r=0;r<d;r+=1){f=n[r],E=t(f,r);var T=c.items.get(E)??w.get(E);T?(s&(K|J))!==0&&he(T,f,r,s):(_=te(null,c,null,null,f,E,r,u,s,a,!0),w.set(E,_)),O.add(E)}for(const[x,R]of c.items)O.has(x)||P.skipped_effects.add(R.e);P.oncommit(v)}else v();g&&U(!0),h(S)}),M&&(i=F)}function Ue(e,s,a,t,u,o,i,c,y){var m=(i&qe)!==0,p=(i&(K|J))!==0,I=s.length,w=a.items,S=a.first,n=S,l,v=null,d,g=[],A=[],b,_,r,f;if(m)for(f=0;f<I;f+=1)b=s[f],_=c(b,f),r=w.get(_),r!==void 0&&(r.a?.measure(),(d??=new Set).add(r));for(f=0;f<I;f+=1){if(b=s[f],_=c(b,f),r=w.get(_),r===void 0){var E=t.get(_);if(E!==void 0){t.delete(_),w.set(_,E);var O=v?v.next:n;D(a,v,E),D(a,E,O),ee(E,O,u),v=E}else{var P=n?n.e.nodes_start:u;v=te(P,a,v,v===null?a.first:v.next,b,_,f,o,i,y)}w.set(_,v),g=[],A=[],n=v.next;continue}if(p&&he(r,b,f,i),(r.e.f&X)!==0&&(ce(r.e),m&&(r.a?.unfix(),(d??=new Set).delete(r))),r!==n){if(l!==void 0&&l.has(r)){if(g.length<A.length){var T=A[0],x;v=T.prev;var R=g[0],W=g[g.length-1];for(x=0;x<g.length;x+=1)ee(g[x],T,u);for(x=0;x<A.length;x+=1)l.delete(A[x]);D(a,R.prev,W.next),D(a,v,R),D(a,W,T),n=T,v=W,f-=1,g=[],A=[]}else l.delete(r),ee(r,n,u),D(a,r.prev,r.next),D(a,r,v===null?a.first:v.next),D(a,v,r),v=r;continue}for(g=[],A=[];n!==null&&n.k!==_;)(n.e.f&X)===0&&(l??=new Set).add(n),A.push(n),n=n.next;if(n===null)continue;r=n}g.push(r),v=r,n=r.next}if(n!==null||l!==void 0){for(var q=l===void 0?[]:oe(l);n!==null;)(n.e.f&X)===0&&q.push(n),n=n.next;var V=q.length;if(V>0){var z=(i&_e)!==0&&I===0?u:null;if(m){for(f=0;f<V;f+=1)q[f].a?.measure();for(f=0;f<V;f+=1)q[f].a?.fix()}Qe(a,q,z)}}m&&Re(()=>{if(d!==void 0)for(r of d)r.a?.apply()}),e.first=a.first&&a.first.e,e.last=v&&v.e;for(var me of t.values())de(me.e);t.clear()}function he(e,s,a,t){(t&K)!==0&&ie(e.v,s),(t&J)!==0?ie(e.i,a):e.i=a}function te(e,s,a,t,u,o,i,c,y,m,p){var I=(y&K)!==0,w=(y&Ce)===0,S=I?w?Se(u,!1,!1):ne(u):u,n=(y&J)===0?i:ne(i),l={i:n,v:S,k:o,a:null,e:null,prev:a,next:t};try{if(e===null){var v=document.createDocumentFragment();v.append(e=fe())}return l.e=re(()=>c(e,S,n,m),M),l.e.prev=a&&a.e,l.e.next=t&&t.e,a===null?p||(s.first=l):(a.next=l,a.e.next=l.e),t!==null&&(t.prev=l,t.e.prev=l.e),l}finally{}}function ee(e,s,a){for(var t=e.next?e.next.e.nodes_start:a,u=s?s.e.nodes_start:a,o=e.e.nodes_start;o!==null&&o!==t;){var i=ke(o);u.before(o),o=i}}function D(e,s,a){s===null?e.first=a:(s.next=a,s.e.next=a&&a.e),a!==null&&(a.prev=s,a.e.prev=s&&s.e)}function Xe(e,s,a){var t=e==null?"":""+e;return t=t?t+" "+s:s,t===""?null:t}function Ge(e,s,a,t,u,o){var i=e.__className;if(M||i!==a||i===void 0){var c=Xe(a,t);(!M||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=a}return o}function Ze(e,s,a=s){var t=new WeakSet;Ve(e,"input",async u=>{var o=u?e.defaultValue:e.value;if(o=ae(e)?se(o):o,a(o),Y!==null&&t.add(Y),await Be(),o!==(o=s())){var i=e.selectionStart,c=e.selectionEnd,y=e.value.length;if(e.value=o??"",c!==null){var m=e.value.length;i===c&&c===y&&m>y?(e.selectionStart=m,e.selectionEnd=m):(e.selectionStart=i,e.selectionEnd=Math.min(c,m))}}}),(M&&e.defaultValue!==e.value||Le(s)==null&&e.value)&&(a(ae(e)?se(e.value):e.value),Y!==null&&t.add(Y)),Pe(()=>{var u=s();if(e===document.activeElement){var o=Ye??Y;if(t.has(o))return}ae(e)&&u===se(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function ae(e){var s=e.type;return s==="number"||s==="range"}function se(e){return e===""?null:+e}var $e=L('<div class="welcome svelte-1uha8ag"><h2 class="svelte-1uha8ag">ðŸ‘‹ Hello! How can I help you today?</h2> <div class="suggestions svelte-1uha8ag"><button class="svelte-1uha8ag">ðŸ’° Cost example</button> <button class="svelte-1uha8ag">ðŸ“Š Compare plans</button> <button class="svelte-1uha8ag">ðŸ“‹ Filing claims</button></div></div>'),je=L('<li class="svelte-1uha8ag"> </li>'),ea=L('<div class="sources svelte-1uha8ag"><strong class="svelte-1uha8ag">Sources:</strong> <ul class="svelte-1uha8ag"></ul></div>'),aa=L('<div><div class="message-content svelte-1uha8ag"> </div> <!></div>'),sa=L('<div class="message message-assistant svelte-1uha8ag"><div class="message-content loading svelte-1uha8ag"><span class="dot svelte-1uha8ag"></span> <span class="dot svelte-1uha8ag"></span> <span class="dot svelte-1uha8ag"></span></div></div>'),ra=L("<!> <!>",1),ta=L('<div class="chat-container svelte-1uha8ag"><header class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">ðŸ‡¿ðŸ‡¦ Insurance Assistant</h1> <p class="svelte-1uha8ag">Your medical aid and insurance questions answered simply</p></header> <div class="messages svelte-1uha8ag"><!></div> <form class="input-form svelte-1uha8ag"><textarea placeholder="Ask me anything about your medical aid or insurance..." rows="1" class="svelte-1uha8ag"></textarea> <button type="submit" class="svelte-1uha8ag"> </button></form></div>');function ua(e){let s=G(We([])),a=G(""),t=G(!1);async function u(){if(!h(a).trim()||h(t))return;const l=h(a).trim();C(a,""),C(s,[...h(s),{role:"user",content:l}],!0),C(t,!0);try{const d=await(await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:l})})).json();d.error?C(s,[...h(s),{role:"assistant",content:`Error: ${d.error}`}],!0):C(s,[...h(s),{role:"assistant",content:d.response,sources:d.sources}],!0)}catch{C(s,[...h(s),{role:"assistant",content:"Sorry, something went wrong. Please try again."}],!0)}finally{C(t,!1)}}function o(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),u())}var i=ta(),c=H(N(i),2),y=N(c);{var m=l=>{var v=$e(),d=H(N(v),2),g=N(d);g.__click=()=>{C(a,"If I break my arm, what will I pay?"),u()};var A=H(g,2);A.__click=()=>{C(a,"What's the difference between Plan A and Plan B?"),u()};var b=H(A,2);b.__click=()=>{C(a,"How do I file a claim?"),u()},k(d),k(v),B(l,v)},p=l=>{var v=ra(),d=Je(v);ue(d,17,()=>h(s),ve,(b,_)=>{var r=aa(),f=N(r),E=N(f,!0);k(f);var O=H(f,2);{var P=T=>{var x=ea(),R=H(N(x),2);ue(R,21,()=>h(_).sources,ve,(W,q)=>{var V=je(),z=N(V,!0);k(V),Z(()=>$(z,h(q))),B(W,V)}),k(R),k(x),B(T,x)};j(O,T=>{h(_).sources&&h(_).sources.length>0&&T(P)})}k(r),Z(()=>{Ge(r,1,`message message-${h(_).role??""}`,"svelte-1uha8ag"),$(E,h(_).content)}),B(b,r)});var g=H(d,2);{var A=b=>{var _=sa();B(b,_)};j(g,b=>{h(t)&&b(A)})}B(l,v)};j(y,l=>{h(s).length===0?l(m):l(p,!1)})}k(c);var I=H(c,2),w=N(I);Fe(w),w.__keydown=o;var S=H(w,2),n=N(S,!0);k(S),k(I),k(i),Z(l=>{w.disabled=h(t),S.disabled=l,$(n,h(t)?"...":"â†’")},[()=>!h(a).trim()||h(t)]),ze("submit",I,l=>{l.preventDefault(),u()}),Ze(w,()=>h(a),l=>C(a,l)),B(e,i)}Ke(["click","keydown"]);export{ua as component};
